clc; clear; %close all;

% % % Graph
% A = [0 1 1 0 0 0 0 0 0 0 1;
%      1 0 1 0 0 0 0 0 0 0 0;
%      1 1 0 1 0 0 0 0 0 0 0;
%      0 0 1 0 1 1 0 0 0 0 0;
%      0 0 0 1 0 1 0 0 0 0 0;
%      0 0 0 1 1 0 1 0 0 0 0;
%      0 0 0 0 0 1 0 1 1 0 0;
%      0 0 0 0 0 0 1 0 1 0 0;
%      0 0 0 0 0 0 1 1 0 1 1;
%      0 0 0 0 0 0 0 0 1 0 1;
%      1 0 0 0 0 0 0 0 1 1 0];

% % Graph
% A = [0 1 1  0 0 0  0 0 0  0 0 0;
%     1 0 1  0 1 0  0 0 0  0 1 0;
%     1 1 0  0 0 0  0 0 0  0 0 0;
% 
%     0 0 0  0 1 1  0 0 0  0 0 0;
%     0 1 0  1 0 1  0 1 0  0 0 0;
%     0 0 0  1 1 0  0 0 0  0 0 0;
% 
%     0 0 0  0 0 0  0 1 1  0 0 0;
%     0 0 0  0 1 0  1 0 1  0 1 0;
%     0 0 0  0 0 0  1 1 0  0 0 0;
% 
%     0 0 0  0 0 0  0 0 0  0 1 1;
%     0 1 0  0 0 0  0 1 0  1 0 1;
%     0 0 0  0 0 0  0 0 0  1 1 0];

% % 2 comm Graph
% A = [0 1 1  1 1 1  0 0 0  0 0 0;
%     1 0 1  1 1 1  0 0 0  0 0 0;
%     1 1 0  1 1 1  0 0 0  0 0 0;
% 
%     1 1 1  0 1 1  0 0 0  0 0 0;
%     1 1 1  1 0 1  0 1 0  0 0 0;
%     1 1 1  1 1 0  0 0 0  0 0 0;
% 
%     0 0 0  0 0 0  0 1 1  1 1 1;
%     0 0 0  0 1 0  1 0 1  1 1 1;
%     0 0 0  0 0 0  1 1 0  1 1 1;
% 
%     0 0 0  0 0 0  1 1 1  0 1 1;
%     0 0 0  0 0 0  1 1 1  1 0 1;
%     0 0 0  0 0 0  1 1 1  1 1 0];


% A = [ 0 1 1 0 0 0 0 0 0 0 0 0 0 0 0 1;
%      1 0 1 0 0 0 0 0 0 0 0 0 1 0 0 0;
%      1 1 0 0 0 0 0 0 0 0 0 0 0 0 0 0;
%      0 0 0 0 1 1 0 0 0 0 0 0 1 0 0 0;
%      0 0 0 1 0 1 0 0 0 0 0 0 0 1 0 0;
%      0 0 0 1 1 0 0 0 0 0 0 0 0 0 0 0;
%      0 0 0 0 0 0 0 1 1 0 0 0 0 1 0 0;
%      0 0 0 0 0 0 1 0 1 0 0 0 0 0 1 0;
%      0 0 0 0 0 0 1 1 0 0 0 0 0 0 0 0;
%      0 0 0 0 0 0 0 0 0 0 1 1 0 0 1 0;
%      0 0 0 0 0 0 0 0 0 1 0 1 0 0 0 1;
%      0 0 0 0 0 0 0 0 0 1 1 0 0 0 0 0;
%      0 1 0 0 1 0 0 0 0 0 0 0 0 0 0 0;
%      0 0 0 0 1 0 0 1 0 0 0 0 0 0 0 0;
%      0 0 0 0 0 0 0 1 0 0 1 0 0 0 0 0;
%      0 1 0 0 0 0 0 0 0 0 1 0 0 0 0 0];

% % Directed path
% A = [ ...
%     0 1 0 0 0 0 0 0 0 0; ...
%     0 0 1 0 0 0 0 0 0 0; ...
%     0 0 0 1 0 0 0 0 0 0; ...
%     0 0 0 0 1 0 0 0 0 0; ...
%     0 0 0 0 0 1 0 0 0 0; ...
%     0 0 0 0 0 0 1 0 0 0; ...
%     0 0 0 0 0 0 0 1 0 0; ...
%     0 0 0 0 0 0 0 0 1 0; ...
%     0 0 0 0 0 0 0 0 0 1; ...
%     0 0 0 0 0 0 0 0 0 0 ...
% ];

% % Directed path edit
% A = [ ...
%     0 1 0 0 0 0 0 0 0 0; ...
%     0 0 1 0 0 0 0 0 0 0; ...
%     0 0 0 1 0 0 0 0 0 0; ...
%     0 0 0 0 1 0 0 0 0 0; ...
%     0 0 0 0 0 1 0 0 0 0; ...
%     0 0 0 0 0 0 1 0 0 0; ...
%     0 0 1 0 0 0 0 1 0 0; ...
%     0 0 0 0 0 0 0 0 1 0; ...
%     0 0 0 0 0 0 0 0 0 1; ...
%     0 0 0 0 0 0 0 0 0 0 ...
% ];

% A = A + diag(ones(length(A),1));

% % Directed path
% A = [ ...
%     0 1 0 0 0; ...
%     0 0 1 0 0; ...
%     0 0 0 1 0; ...
%     0 0 0 0 1; ...
%     0 0 0 0 0; ...
% ];


% Directed cycle
A = [ ...
    0 1 0 0 0 0 0 0 0 0; ...
    0 0 1 0 0 0 0 0 0 0; ...
    0 0 0 1 0 0 0 0 0 0; ...
    0 0 0 0 1 0 0 0 0 0; ...
    0 0 0 0 0 1 0 0 0 0; ...
    0 0 0 0 0 0 1 0 0 0; ...
    0 0 0 0 0 0 0 1 0 0; ...
    0 0 0 0 0 0 0 0 1 0; ...
    0 0 0 0 0 0 0 0 0 1; ...
    1 0 0 0 0 0 0 0 0 0 ...
];

% % Directed cycle with hubs
% A = [ ...
%     0 1 1 1 1 0 0 0 0 0; ...
%     1 0 1 1 1 0 0 0 0 0; ...
%     1 1 0 1 1 0 0 0 0 0; ...
%     1 1 1 0 1 0 0 0 0 0; ...
%     1 1 1 1 0 1 0 0 0 0; ...
%     0 0 0 0 0 0 1 0 0 0; ...
%     0 0 0 0 0 0 0 1 0 0; ...
%     0 0 0 0 0 0 0 0 1 0; ...
%     0 0 0 0 0 0 0 0 0 1; ...
%     1 0 0 0 0 0 0 0 0 0 ...
% ];

% % Directed cycle
% A = [ ...
%     0 1 0 0 0; ...
%     0 0 1 0 0; ...
%     0 0 0 1 0; ...
%     0 0 0 0 1; ...
%     1 0 0 0 0 ...
% ];

% 
% A = [ ...
%     0 0 0 1; ...
%     0 0 0 1; ...
%     0 0 0 1; ...
%     0 0 0 0 ...
% ];

% L = diag(sum(A,2)) - A;

% A = A+A';

d = sum(A,2);
D = diag(d);
D_inv_sqrt = diag(1 ./ sqrt(d + eps));  % add eps to avoid division by zero
L = eye(size(A)) - D_inv_sqrt * A * D_inv_sqrt;

M = A';

[centrality] = local_eigenvector_centrality(M,[],1);

[V, D] = eig(M);
[Dsort, idx] = sort(real(diag(D)), 'descend'); 
V = V(:,idx);